name = "socialmediamanager-api"
main = "src/index.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]
account_id = "8c74a072236761cf6126371f0b20c5a9"

# Custom domain routes (configured manually in dashboard)
# routes = [
#   { pattern = "api.hlpfl.space/*", zone_name = "hlpfl.space" },
#   { pattern = "hlpfl.space/api/*", zone_name = "hlpfl.space" }
# ]

[vars]
NODE_ENV = "production"
JWT_SECRET = "your-super-secret-jwt-key-change-this-in-production"
# MONGODB_URI = "mongodb+srv://founder_db_user:hlpfl@cluster0.gannhym.mongodb.net/"

# D1 Database for user data
[[d1_databases]]
binding = "DB"
database_name = "socialmediamanager-db"
database_id = "8860d9ea-f18a-422d-b409-f641edd83fd0"

# KV Storage for user data (commented out - using D1 instead)
# [[kv_namespaces]]
# binding = "USERS_KV"
# id = "socialmediamanager-users"
# preview_id = "socialmediamanager-users-preview"

# Environment variables (set these in Cloudflare dashboard)
# TWITTER_API_KEY = "your-key"
# MONGODB_URI = "your-mongodb-connection"
# REDIS_URL = "your-redis-url"
# JWT_SECRET = "your-jwt-secret"

[env.production]
vars = { ENVIRONMENT = "production", NODE_ENV = "production", JWT_SECRET = "your-super-secret-jwt-key-change-this-in-production" }

[[env.production.d1_databases]]
binding = "DB"
database_name = "socialmediamanager-db"
database_id = "8860d9ea-f18a-422d-b409-f641edd83fd0"

[env.staging]
vars = { ENVIRONMENT = "staging", NODE_ENV = "staging", JWT_SECRET = "staging-jwt-secret" }

[[env.staging.d1_databases]]
binding = "DB"
database_name = "socialmediamanager-db"
database_id = "8860d9ea-f18a-422d-b409-f641edd83fd0"